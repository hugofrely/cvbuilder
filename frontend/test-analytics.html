<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Analytics - CVBuilder</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            color: #667eea;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        .event-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            border-radius: 8px;
        }
        .event-section h3 {
            margin-top: 0;
            color: #667eea;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s;
        }
        button:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        .log {
            background: #1e1e1e;
            color: #4af626;
            padding: 15px;
            border-radius: 6px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
        }
        .log-entry {
            margin: 5px 0;
            padding: 5px;
        }
        .success {
            color: #4af626;
        }
        .error {
            color: #ff6b6b;
        }
        .info {
            color: #4dabf7;
        }
        code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status.ready {
            background: #51cf66;
            color: white;
        }
        .status.not-ready {
            background: #ff6b6b;
            color: white;
        }
        .instructions {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
        .instructions h4 {
            margin-top: 0;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Test des √©v√©nements Google Analytics</h1>
        <p class="subtitle">V√©rifier que les √©v√©nements de tracking fonctionnent correctement</p>

        <div class="instructions">
            <h4>üìã Instructions</h4>
            <ol>
                <li>Ouvrez la console du navigateur (F12)</li>
                <li>Installez l'extension <strong>Google Analytics Debugger</strong></li>
                <li>Cliquez sur les boutons ci-dessous pour tester chaque √©v√©nement</li>
                <li>V√©rifiez les logs dans la console et dans cette page</li>
                <li>Allez dans GA4 ‚Üí Rapports ‚Üí Temps r√©el ‚Üí √âv√©nements</li>
            </ol>
        </div>

        <div id="status">
            <h3>Statut Google Analytics <span id="ga-status" class="status not-ready">NON D√âTECT√â</span></h3>
            <p id="ga-id">Measurement ID: <code>Non configur√©</code></p>
        </div>

        <hr>

        <div class="event-section">
            <h3>1. üí≥ Payment Success</h3>
            <p>Simule un paiement r√©ussi avec un montant</p>
            <button onclick="testPaymentSuccess()">Tester payment_success</button>
            <p><small>√âv√©nement: <code>payment_success</code> | Cat√©gorie: <code>conversion</code></small></p>
        </div>

        <div class="event-section">
            <h3>2. üì• CV Exported</h3>
            <p>Simule l'export d'un CV en PDF</p>
            <button onclick="testCVExported()">Tester cv_exported</button>
            <p><small>√âv√©nement: <code>cv_exported</code> | Cat√©gorie: <code>conversion</code></small></p>
        </div>

        <div class="event-section">
            <h3>3. üé® CV Created</h3>
            <p>Simule la cr√©ation d'un nouveau CV</p>
            <button onclick="testCVCreated()">Tester cv_created</button>
            <p><small>√âv√©nement: <code>cv_created</code> | Cat√©gorie: <code>engagement</code></small></p>
        </div>

        <div class="event-section">
            <h3>4. üëÅÔ∏è Template Viewed</h3>
            <p>Simule la pr√©visualisation d'un template</p>
            <button onclick="testTemplateViewed()">Tester template_viewed</button>
            <p><small>√âv√©nement: <code>template_viewed</code> | Cat√©gorie: <code>engagement</code></small></p>
        </div>

        <div class="event-section">
            <h3>5. ‚≠ê Premium Click</h3>
            <p>Simule le clic sur un template premium</p>
            <button onclick="testPremiumClick()">Tester premium_click</button>
            <p><small>√âv√©nement: <code>premium_click</code> | Cat√©gorie: <code>engagement</code></small></p>
        </div>

        <hr>

        <h3>üìä Logs en temps r√©el</h3>
        <button onclick="clearLogs()">Effacer les logs</button>
        <div class="log" id="log-container">
            <div class="log-entry info">üîµ En attente d'√©v√©nements...</div>
        </div>
    </div>

    <script>
        // Check if gtag is loaded
        const GA_TRACKING_ID = 'G-XXXXXXXXXX'; // Replace with your actual ID

        function checkGAStatus() {
            const gaStatus = document.getElementById('ga-status');
            const gaId = document.getElementById('ga-id');

            if (typeof window.gtag !== 'undefined') {
                gaStatus.textContent = 'D√âTECT√â';
                gaStatus.className = 'status ready';
                gaId.innerHTML = `Measurement ID: <code>${GA_TRACKING_ID}</code>`;
                addLog('‚úÖ Google Analytics d√©tect√© et pr√™t', 'success');
            } else {
                gaStatus.textContent = 'NON D√âTECT√â';
                gaStatus.className = 'status not-ready';
                gaId.innerHTML = `Measurement ID: <code>Non configur√©</code>`;
                addLog('‚ö†Ô∏è Google Analytics non d√©tect√©. Assurez-vous que gtag.js est charg√©.', 'error');
            }
        }

        function addLog(message, type = 'info') {
            const logContainer = document.getElementById('log-container');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;

            // Also log to console
            console.log(`[Analytics Test] ${message}`);
        }

        function clearLogs() {
            document.getElementById('log-container').innerHTML = '';
            addLog('üîµ Logs effac√©s', 'info');
        }

        // Mock analytics functions
        function event({ action, category, label, value }) {
            if (typeof window.gtag !== 'undefined') {
                window.gtag('event', action, {
                    event_category: category,
                    event_label: label,
                    value: value,
                });
                addLog(`‚úÖ √âv√©nement envoy√©: ${action}`, 'success');
                addLog(`   Cat√©gorie: ${category}`, 'info');
                if (label) addLog(`   Label: ${label}`, 'info');
                if (value) addLog(`   Valeur: ${value}`, 'info');
            } else {
                addLog(`‚ùå Impossible d'envoyer ${action} - gtag non charg√©`, 'error');
            }
        }

        // Test functions
        function testPaymentSuccess() {
            addLog('üß™ Test: payment_success', 'info');
            event({
                action: 'payment_success',
                category: 'conversion',
                label: 'premium_purchase',
                value: 9.99
            });
        }

        function testCVExported() {
            addLog('üß™ Test: cv_exported', 'info');
            event({
                action: 'cv_exported',
                category: 'conversion',
                label: 'pdf'
            });
        }

        function testCVCreated() {
            addLog('üß™ Test: cv_created', 'info');
            event({
                action: 'cv_created',
                category: 'engagement',
                label: 'Modern Template'
            });
        }

        function testTemplateViewed() {
            addLog('üß™ Test: template_viewed', 'info');
            event({
                action: 'template_viewed',
                category: 'engagement',
                label: 'Professional CV'
            });
        }

        function testPremiumClick() {
            addLog('üß™ Test: premium_click', 'info');
            event({
                action: 'premium_click',
                category: 'engagement',
                label: 'premium_button'
            });
        }

        // Check GA status on load
        window.addEventListener('load', () => {
            setTimeout(checkGAStatus, 1000);
        });
    </script>
</body>
</html>
