<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ resume.full_name }} - CV</title>
    <style>
        {{ template_css }}

        {% if watermark %}
        body::before {
            content: 'PREVIEW';
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 120px;
            font-weight: bold;
            color: rgba(0, 0, 0, 0.05);
            z-index: -1;
            user-select: none;
        }
        {% endif %}
    </style>
</head>
<body>
    <div class="cv-container">
        <!-- Header -->
        <header class="cv-header">
            <h1>{{ resume.full_name }}</h1>
            {% if resume.title %}
            <h2>{{ resume.title }}</h2>
            {% endif %}

            <div class="contact-info">
                <p>{{ resume.email }}</p>
                {% if resume.phone %}<p>{{ resume.phone }}</p>{% endif %}
                {% if resume.address %}<p>{{ resume.address }}</p>{% endif %}
                {% if resume.website %}<p><a href="{{ resume.website }}">{{ resume.website }}</a></p>{% endif %}
                {% if resume.linkedin_url %}<p><a href="{{ resume.linkedin_url }}">LinkedIn</a></p>{% endif %}
                {% if resume.github_url %}<p><a href="{{ resume.github_url }}">GitHub</a></p>{% endif %}
            </div>
        </header>

        <!-- Summary -->
        {% if resume.summary %}
        <section class="cv-section">
            <h3>Résumé professionnel</h3>
            <p>{{ resume.summary }}</p>
        </section>
        {% endif %}

        <!-- Experience -->
        {% if resume.experience_data %}
        <section class="cv-section">
            <h3>Expérience professionnelle</h3>
            {% for exp in resume.experience_data %}
            <div class="experience-item">
                <h4>{{ exp.position }} - {{ exp.company }}</h4>
                {% if exp.location %}<p class="location">{{ exp.location }}</p>{% endif %}
                <p class="date-range">
                    {{ exp.start_date }}
                    {% if exp.is_current %}
                        - Présent
                    {% elif exp.end_date %}
                        - {{ exp.end_date }}
                    {% endif %}
                </p>
                {% if exp.description %}
                <p class="description">{{ exp.description }}</p>
                {% endif %}
            </div>
            {% endfor %}
        </section>
        {% endif %}

        <!-- Education -->
        {% if resume.education_data %}
        <section class="cv-section">
            <h3>Formation</h3>
            {% for edu in resume.education_data %}
            <div class="education-item">
                <h4>{{ edu.degree }}{% if edu.field_of_study %} en {{ edu.field_of_study }}{% endif %}</h4>
                <p class="institution">{{ edu.institution }}</p>
                {% if edu.location %}<p class="location">{{ edu.location }}</p>{% endif %}
                <p class="date-range">
                    {{ edu.start_date }}
                    {% if edu.is_current %}
                        - En cours
                    {% elif edu.end_date %}
                        - {{ edu.end_date }}
                    {% endif %}
                </p>
                {% if edu.grade %}<p class="grade">Mention : {{ edu.grade }}</p>{% endif %}
                {% if edu.description %}<p class="description">{{ edu.description }}</p>{% endif %}
            </div>
            {% endfor %}
        </section>
        {% endif %}

        <!-- Skills -->
        {% if resume.skills_data %}
        <section class="cv-section">
            <h3>Compétences</h3>
            <div class="skills-container">
                {% for skill in resume.skills_data %}
                <div class="skill-item">
                    <span class="skill-name">{{ skill.name }}</span>
                    <span class="skill-level">{{ skill.level }}</span>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Languages -->
        {% if resume.languages_data %}
        <section class="cv-section">
            <h3>Langues</h3>
            <div class="languages-container">
                {% for lang in resume.languages_data %}
                <div class="language-item">
                    <span class="language-name">{{ lang.name }}</span>
                    <span class="language-level">{{ lang.level }}</span>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Certifications -->
        {% if resume.certifications_data %}
        <section class="cv-section">
            <h3>Certifications</h3>
            {% for cert in resume.certifications_data %}
            <div class="certification-item">
                <h4>{{ cert.name }}</h4>
                {% if cert.issuer %}<p class="issuer">{{ cert.issuer }}</p>{% endif %}
                {% if cert.date %}<p class="date">{{ cert.date }}</p>{% endif %}
                {% if cert.url %}<p><a href="{{ cert.url }}">Voir la certification</a></p>{% endif %}
            </div>
            {% endfor %}
        </section>
        {% endif %}

        <!-- Projects -->
        {% if resume.projects_data %}
        <section class="cv-section">
            <h3>Projets</h3>
            {% for project in resume.projects_data %}
            <div class="project-item">
                <h4>{{ project.name }}</h4>
                {% if project.description %}<p class="description">{{ project.description }}</p>{% endif %}
                {% if project.technologies %}
                <p class="technologies"><strong>Technologies :</strong> {{ project.technologies }}</p>
                {% endif %}
                {% if project.url %}<p><a href="{{ project.url }}">Voir le projet</a></p>{% endif %}
            </div>
            {% endfor %}
        </section>
        {% endif %}

        <!-- Custom Sections -->
        {% for section in resume.custom_sections %}
        <section class="cv-section">
            <h3>{{ section.title }}</h3>
            <div class="custom-content">
                {{ section.content }}
            </div>
        </section>
        {% endfor %}
    </div>
</body>
</html>
